# TextFilesMerge
这是一个用于批量合并txt小说文件的Python脚本,项目名称为TextFilesMerge。

## 功能概述:
1. 遍历指定的输入文件夹,找到其中的所有子文件夹
2. 对每个子文件夹中的txt文件,使用OpenAI的NLP模型进行语义排序
3. 按排序后的顺序将每个子文件夹中的所有txt文件内容拼接成一个文件
4. 将拼接后的大文件保存到输出目录,文件名为子文件夹名

## 主要代码逻辑:
1. 定义OpenAI API keys列表,完成folders记录已经处理过的文件夹
2. semantic_sort函数使用OpenAI对txt文件列表进行语义排序
3. concat_txt_in_dir函数处理每个子文件夹
   - 读取子文件夹内所有txt文件
   - 尝试最多3次使用semantic_sort排序这些txt文件
   - 如果排序失败,跳过该子文件夹
   - 如果排序成功,则读取每个txt文件的内容,添加标题,写入输出文件
   - 记录子文件夹名到completed_folders表示完成处理
4. 主函数中遍历所有输入文件夹,使用线程池启动concat_txt_in_dir处理每个子文件夹
5. 还原了一些异常处理和编码处理逻辑

## 输入文件结构示例:
```bash
# tree /mnt/g/tmp/
/mnt/g/tmp/
├── t1
│   ├── 当代网友穿越实录：追星女孩、干饭王与小丑全都恋爱啦
│   │   ├── 01后宫干饭王.txt
│   │   ├── 02番外之岳灵溪.txt
│   │   ├── 03番外之沈湛.txt
│   │   ├── 04我馋他的身子.txt
│   │   ├── 05番外.txt
│   │   ├── 06想想就害怕.txt
│   │   ├── 07番外.txt
│   │   ├── 08跨时空追星.txt
│   │   ├── 09太后番外-念海棠.txt
│   │   ├── 10太后番外-如故.txt
│   │   ├── 11静夜思卿卿.txt
│   │   └── 12番外之沈隶.txt
│   └── 胆小鬼：让你夜不能寐的「童年阴影」
│       ├── 1万恶的蜂窝煤.txt
│       ├── 2死小孩.txt
│       ├── 3别信小孩.txt
│       ├── 4怪味.txt
│       ├── 5转角奇谈.txt
│       ├── 6水鬼.txt
│       ├── 7悲伤纸人.txt
│       └── 8恩人.txt
└── t2
    ├── 满月当空：她是高墙上的凌霄花
    │   ├── 1改写结局.txt
    │   ├── 2许小姐的野玫瑰.txt
    │   ├── 3引她沉溺.txt
    │   ├── 4娱乐圈判官.txt
    │   └── 5没有演技，将被抹杀.txt
    └── 漫漫仙途桃花劫
        ├── 10师尊太偏心.txt
        ├── 11年下妖皇.txt
        ├── 12久久月独.txt
        ├── 13设个圈套来爱你.txt
        ├── 14遥寄嘉玉梦清渊.txt
        ├── 15钓龙飞升.txt
        ├── 16泠然御风.txt
        ├── 17夫君变师父.txt
        ├── 18我在直播间卖符.txt
        ├── 19穿成炮灰男配的一只狗.txt
```